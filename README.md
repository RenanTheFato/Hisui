<div align="center">

| <img src="public/symbol.png" width="80" alt="Hisui Icon" align="center"> | <h1 align="center">Hisui</h1> |
|----------------------------------------------------------------------------|:---------------------------------:|

---

</div>

<div>
<img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white">
<img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white">
<img src="https://img.shields.io/badge/fastify-%23000000.svg?style=for-the-badge&logo=fastify&logoColor=white">
<img src="https://img.shields.io/badge/json-%23000000.svg?style=for-the-badge&logo=json&logoColor=white">
<img src="https://img.shields.io/badge/JWT-black?style=for-the-badge&logo=JSON%20web%20tokens">
<img src="https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white">
<img src="https://img.shields.io/badge/Prisma-%2314BF96.svg?style=for-the-badge&logo=Prisma&logoColor=white">
<img src="https://img.shields.io/badge/zod-%233068b7.svg?style=for-the-badge&logo=zod&logoColor=white">
<img src="https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54">
<img src="https://img.shields.io/badge/Poetry-00BABA.svg?style=for-the-badge&logo=poetry&logoColor=FFFFFF">
<img src="https://img.shields.io/badge/flask-%23000.svg?style=for-the-badge&logo=flask&logoColor=white">
<img src="https://img.shields.io/badge/Pandas-501F87.svg?style=for-the-badge&logo=pandas&logoColor=FFFFFF">
<img src="https://img.shields.io/badge/scikit_learn-FF8324.svg?style=for-the-badge&logo=scikitlearn&logoColor=FFFFFF">
</div>

---

## üíª Nome do Projeto
**Hisui**

## üè´ Institui√ß√£o
ETEC Dr. Geraldo Jos√© Rodrigues Alckmin - Taubat√©

## üë• Integrantes da Equipe
- Renan Dias Santos de Santana
- Arthur Roberto Weege Pontes 
- Guilherme Silveira Fernandes da Silva

## üìã Descri√ß√£o do Projeto
O **Hisui** √© um projeto de backend voltado para aplica√ß√µes modernas que integram processamento de dados e machine learning.  
A solu√ß√£o busca oferecer uma estrutura robusta para **armazenamento, an√°lise e processamento de dados**, utilizando **Node.js (Fastify + Prisma + PostgreSQL)** no backend principal e **Python (Flask + Scikit-learn + Pandas)** para camadas de an√°lise e intelig√™ncia.  

Esse projeto se encaixa como base de uma startup tecnol√≥gica, fornecendo um ecossistema escal√°vel e seguro para manipula√ß√£o de dados, autentica√ß√£o e comunica√ß√£o entre servi√ßos.

---

## üé• V√≠deo Sobre A Hisui

Voc√™ pode acessar o conte√∫do em v√≠deo acessando o 
<u><a href="https://drive.google.com/file/d/1ZOhK8nMM80z1wI8hHQitA7hnv9XA_hf5/view?usp=drivesdk">Google Drive</a></u>


---

## üõ†Ô∏è Tecnologias Utilizadas no Backend
- **Linguagem:** Node.js (TypeScript)
  <div style="text-align: justify;">
  Node.js √© um ambiente de execu√ß√£o JavaScript que permite construir aplica√ß√µes de backend escal√°veis e de alta performance. A adi√ß√£o de TypeScript, um superconjunto de JavaScript, introduz tipagem est√°tica ao c√≥digo, o que auxilia na preven√ß√£o de erros em tempo de desenvolvimento e melhora a manutenibilidade do projeto. A escolha por Node.js com TypeScript √© estrat√©gica para garantir um backend robusto e eficiente, facilitando a colabora√ß√£o em equipes e a manuten√ß√£o de uma base de c√≥digo complexa, ao mesmo tempo em que oferece agilidade no desenvolvimento.
  </div>
    
- **Framework:** Fastify
   <div style="text-align: justify;">
   Fastify √© um framework web minimalista e de alto desempenho para Node.js, projetado para oferecer uma solu√ß√£o r√°pida e com baixa sobrecarga na constru√ß√£o de APIs e servi√ßos web. Sua arquitetura prioriza a velocidade e a efici√™ncia na resposta, sendo otimizado para lidar com altas cargas de tr√°fego. Este framework foi selecionado devido √† sua performance superior, extensibilidade atrav√©s de plugins e √† sua capacidade de entregar aplica√ß√µes com requisitos de baixa lat√™ncia e alta throughput.
   </div>
     
- **Banco de Dados:** PostgreSQL
   <div style="text-align: justify;">
   PostgreSQL √© um sistema de gerenciamento de banco de dados relacional e de c√≥digo aberto, amplamente reconhecido por sua confiabilidade, robustez e conformidade com padr√µes SQL. Ele suporta uma vasta gama de recursos avan√ßados e √© capaz de gerenciar grandes volumes de dados e m√∫ltiplas conex√µes simult√¢neas de forma est√°vel. A decis√£o de utilizar PostgreSQL baseia-se em sua seguran√ßa comprovada, flexibilidade, escalabilidade e na capacidade de garantir a integridade dos dados em cen√°rios de alta demanda.
   </div>
     
- **ORM:** Prisma
   <div style="text-align: justify;">
   Prisma atua como um ORM (Object-Relational Mapper) moderno, simplificando a intera√ß√£o com o banco de dados em aplica√ß√µes Node.js e TypeScript. Ele permite definir o esquema do banco de dados de forma declarativa e gera um cliente de consulta type-safe, o que reduz a necessidade de escrever SQL diretamente e minimiza erros. O Prisma foi escolhido por sua excelente integra√ß√£o com TypeScript, que oferece seguran√ßa de tipo, aumenta a produtividade dos desenvolvedores e simplifica a gest√£o de migra√ß√µes e o acesso aos dados.
   </div>
   
- **Valida√ß√µes:** Zod
   <div style="text-align: justify;">
   Zod √© uma biblioteca de valida√ß√£o e transforma√ß√£o de dados TypeScript-first, utilizada para definir e validar a estrutura e os tipos dos dados de entrada no backend. Ela permite criar schemas declarativos para garantir que os dados recebidos estejam em conformidade com as expectativas do sistema, prevenindo assim erros de aplica√ß√£o e potenciais vulnerabilidades. A escolha por Zod se justifica pela sua performance, sintaxe intuitiva e pela capacidade de gerar tipagens automaticamente, promovendo maior seguran√ßa e clareza na manipula√ß√£o dos dados.
   </div>
     
- **Autentica√ß√£o:** JWT
   <div style="text-align: justify;">
   JWT (JSON Web Token) √© um padr√£o para a cria√ß√£o de tokens de acesso que s√£o compactos, seguros e auto-contidos, frequentemente empregados em sistemas de autentica√ß√£o e autoriza√ß√£o. Ele permite a transmiss√£o segura de informa√ß√µes sobre o usu√°rio entre as partes, assinado digitalmente para verificar sua integridade e autenticidade. Proporciona escalabilidade ao sistema de autentica√ß√£o, e pela sua efici√™ncia em ambientes distribu√≠dos, como APIs e microsservi√ßos.
   </div>
  
- **Integra√ß√µes com IA/Data Science:** Python (Flask, Pandas, Scikit-learn, Poetry)
   <div style="text-align: justify;">
   Para as capacidades de Intelig√™ncia Artificial e Data Science, Python √© a linguagem escolhida, complementada por ferramentas como Flask para a exposi√ß√£o de modelos via API, Pandas para a manipula√ß√£o e an√°lise de dados, e Scikit-learn para a implementa√ß√£o de algoritmos de machine learning. Poetry √© utilizado para gerenciar as depend√™ncias do projeto de forma organizada. Esta sele√ß√£o √© fundamentada na vasta cole√ß√£o de bibliotecas e na robustez do ecossistema Python para tarefas de IA e an√°lise de dados, permitindo a integra√ß√£o de funcionalidades inteligentes de forma eficaz e com alto desempenho.
   </div>
---

## ‚öôÔ∏è Instru√ß√µes de Setup

### Requisitos
- **Node.js**: vers√£o `>=22.17.0`  
- **Banco de Dados**: PostgreSQL
- **Poetry** (para depend√™ncias Python, caso utilize os m√≥dulos de an√°lise)

## Backend NodeJs

```bash
# Instalar depend√™ncias do projeto
npm install
```

```bash
# Gerar o Banco de Dados
npx prisma migrate dev --name init
```

```bash
# Iniciar o projeto
npm run dev 
```

```bash
# Executar um teste
npm run test <caminho-para-arquivo-de-testes>/<arquivo de testes> 
```

### üìß Configurando o Nodemailer

O projeto utiliza o **Nodemailer** para envio de e-mails (como notifica√ß√µes e valida√ß√µes).  
Para que ele funcione corretamente, siga os passos abaixo:

1. **Ative a autentica√ß√£o de dois fatores no seu e-mail** (exemplo: Gmail).  
2. **Gere uma senha de aplicativo** (em vez da senha principal).  
   - Para Gmail: [Gerar senha de app](https://myaccount.google.com/apppasswords).  
3. Configure as vari√°veis de ambiente no arquivo `.env`:

   ```env
   EMAIL_USER="seu_email_aqui@gmail.com"
   EMAIL_PASS="sua_senha_de_aplicativo"
   ```

---

### üì∞ Configurando API Externa de Not√≠cias

O projeto utiliza a API da **Massive** para obter not√≠cias sobre o mercado.  
Para que funcione corretamente, siga os passos abaixo:

1. **Cadastre-se no site da Massive**.  
   - Site Oficial: [Massive](https://massive.com/).
2. **Gere a sua Chave de API no Dashboard** 
3. Configure a vari√°vel de ambiente no arquivo `.env`:

   ```env
    MASSIVE_API_KEY="sua_chave_api_gerada"
   ```

---

## Python

```bash
# Instalar Poetry
pip install poetry
```

```bash
# Executar ambiente virtual
poetry shell
```

```bash
# Instalar as depend√™ncias
poetry install
```

```bash
# Iniciar servidor Python
poetry run start-server
```
---

## üåê Vari√°veis de Ambiente

### Possu√≠mos um arquivo de exemplo de como configurar as vari√°veis de ambiente necess√°rias para executar o projeto

- ### Vari√°veis Ambiente Backend NodeJs
  - <u><a href="./backend/.env.example">backend/.env.example</a></u>
  ```env
   HTTP_PORT=3333
   HTTP_HOST='0.0.0.0'

   POSTGRES_USER="your_postgres_user"
   POSTGRES_PASSWORD="your_postgres_password"
   POSTGRES_DB="your_postgres_database"

   DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}"

   JWT_SECRET="your_strong_secret"

   EMAIL_USER="email_used_on_nodemailer"

   EMAIL_PASS="nodemailer_app_password"

   BACKEND_URL="http://localhost:3333"

   MASSIVE_API_KEY="your_massive_api_key"

   PYTHON_SERVER_URL="http://your_python_server_url"
  ```

  - ###  Para testes
    - <u><a href="./backend/.env.test.example">backend/.env.test.example</a></u>

    ```env
      HTTP_HOST="test_host_string"
      HTTP_PORT=NUMBER_OF_PORT_FOR_TESTING

      POSTGRES_USER="your_postgres_user"
      POSTGRES_PASSWORD="your_postgres_password"
      POSTGRES_DB="your_postgres_database"

      DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}"

      JWT_SECRET="your_test_strong_secret"
    ```

 - ### Vari√°veis Ambiente Python
     - <u><a href="./machine/.env.example">machine/.env.test.example</a></u>
    ```env
      FLASK_ENV=development
      SECRET_KEY=your-secret-key-here

      HOST=0.0.0.0
      PORT=5000

      LOG_LEVEL=INFO

      MODEL_RETRAIN_PERIOD=3y
      AUTO_RETRAIN=false
    ```
---

  ## üë®‚ÄçüíºAcesso a Rotas Administrativas 

  Para acessar rotas administrativas ir√° precisar atualizar um usu√°rio no banco de dados para que contenha o cargo ADMIN

  ```sql
  UPDATE USERS SET "role" = 'ADMIN' WHERE "id" = 'seu_id_de_usuario';
  ```
---

 ## üìÑ Documenta√ß√£o

  A documenta√ß√£o foi feita via **Swagger** e pode ser acessada ao iniciar o servidor acessando a rota **/docs** em seu navegador

  Voc√™ pode importar as rotas para o seu cliente API (no projeto foi utilizado o insomnia), acessando o arquivo:

  - <u><a href="./insomnia.json">Rotas API em arquivo .json</a></u>
---
  ## üì¶ Informa√ß√µes Adicionais

  **Acesse o arquivo** <u><a href="./tech.md">Detalhamento T√©cnico</a></u>, para obter mais informa√ß√µes sobre como realizamos nosso projeto, quais indicadores econ√¥micos foram utilizados de uma maneira mais t√©cnica
